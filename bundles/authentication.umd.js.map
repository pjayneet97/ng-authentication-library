{"version":3,"file":"authentication.umd.js","sources":["ng://authentication/lib/authentication.service.ts","ng://authentication/lib/authentication.component.ts","ng://authentication/lib/authentication.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { auth } from 'firebase/app';\nimport * as firebase from 'firebase'; \n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthenticationService {\n  authInfo=null;\n  windowRef:any;\n  mode;\n  authType=null;\n  constructor(public afAuth:AngularFireAuth) {\n    this.windowRef = window;\n    afAuth.authState.subscribe(res=>{\n      this.authInfo=res;\n      if(this.authType=='email'){\n        if(res){\n          if(res.emailVerified){\n            this.mode='successful'\n          }\n          else{\n            this.mode='emailverify'\n          }\n        }\n      }\n      else if(this.authType=='phone'){\n        this.mode='successful';\n      }\n    })\n   }\n\n  isAuthenticated(){\n    if(this.authInfo){\n      return true;\n    }\n    else{\n      return false;\n    }\n  }\n  googleLogin() {\n    this.authType='email';\n    return this.afAuth.auth.signInWithPopup(new auth.GoogleAuthProvider())\n  }\n  loginWithEmail(email:string,password:string){\n    this.authType='email';\n    return this.afAuth.auth.signInWithEmailAndPassword(email,password);\n  }\n  createUserWithEmail(email,password,photoURL,displayName){\n    this.authType='email';\n    return this.afAuth.auth.createUserWithEmailAndPassword(email,password).then(res=>{\n      this.updateProfile(displayName,photoURL);\n      this.sendEmailVerification()\n    })\n  }\n  signInWithPhone(phoneNo) {\n    this.authType='phone';\n    const appVerifier = this.windowRef.recaptchaVerifier;\n    return this.afAuth.auth.signInWithPhoneNumber(phoneNo,appVerifier)\n  }\n\n  resend(phoneNo){\n    this.authType='phone'\n    const appVerifier = this.windowRef.recaptchaVerifier;\n    return this.afAuth.auth.signInWithPhoneNumber(phoneNo,appVerifier)\n  }\n\n  verifyOTP(otp) {\n    this.authType='phone';\n    return this.windowRef.confirmationResult.confirm(otp)\n  }\n\n  logOut() {\n    this.authInfo=null;\n    return this.afAuth.auth.signOut();\n  }\n  getauthDetails(){\n    return this.authInfo;\n  }\n  sendEmailVerification(){\n    this.afAuth.auth.currentUser.sendEmailVerification()\n  }\n  updateProfile(displayName,photoURL){\n    return this.afAuth.auth.currentUser.updateProfile({displayName,photoURL})\n  }\n  updatePassword(newPassword){\n    return this.afAuth.auth.currentUser.updatePassword(newPassword)\n  }\n  isEmailVerified(){\n    return this.authInfo.emailVerified\n  }\n\n\n\n  \n}\n","import { Component, OnInit } from '@angular/core';\nimport { AuthenticationService } from './authentication.service';\nimport * as firebase from 'firebase';\n@Component({\n  selector: 'lib-authentication',\n  templateUrl: './authentication.component.html',\n  styleUrls: ['./authentication.component.scss']\n})\nexport class AuthenticationComponent implements OnInit {\n  phone\n  loading=false;\n  constructor(public auth:AuthenticationService) { }\n\n  ngOnInit() {\n    this.auth.mode='emaillogin';\n    this.auth.windowRef.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha', {\n      size: 'invisible',\n      callback(response) {\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n        this.auth.signInWithPhone();\n      }\n    });\n    this.auth.windowRef.recaptchaVerifier.render();\n  }\n  signInWithGoogle(){\n    this.loading=true;\n    this.auth.googleLogin().then(res=>{\n      this.loading=false\n      console.log(res)\n    }).catch(err=>{\n      alert(\"error\")\n      this.loading=false;\n    })\n  }\n  signInWithEmail(formData){\n    this.loading=true;\n    this.auth.loginWithEmail(formData.email,formData.password).then(res=>{\n      console.log(res)\n      this.loading=false;\n    })\n  }\n\n  logOut(){\n    this.loading=true;\n    this.auth.logOut().then(res=>{\n      this.auth.mode='emaillogin';\n      this.loading=false\n    })\n  }\n\n  sendOTP(formData) {\n    if (formData.phone) { \n      this.loading=true;\n       this.phone = '+91' + formData.phone.toString();\n      this.auth.signInWithPhone(this.phone).then(result => {\n      this.auth.windowRef.confirmationResult = result;\n      this.auth.mode='verifyotp'\n      this.loading=false;\n      console.log(\"otp Sent\")\n    })\n    .catch( error => {\n      console.log(error);\n      alert(\"error occoured\");\n      this.loading=false\n    }); }\n  }\n\n  varify(otp) {\n    if (otp) {\n      this.auth.verifyOTP(otp.toString());\n    }\n  }\n  resend(){\n    this.auth.resend(this.phone);\n  }\n  signupwithemail(formData){\n    this.loading=true\n    this.auth.createUserWithEmail(formData.email,formData.password,\"\",formData.name).then(res=>{\n      this.loading=false\n    })\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { AuthenticationComponent } from './authentication.component';\nimport { AngularFireModule } from '@angular/fire';\nimport { AngularFireAuthModule } from '@angular/fire/auth';\nimport { CommonModule } from '@angular/common';  \n\nimport { FormsModule }   from '@angular/forms';\n\n\n@NgModule({\n  declarations: [AuthenticationComponent],\n  imports: [\n    AngularFireModule.initializeApp({\n      apiKey: \"AIzaSyCG0rcc-R7bBSSgoJD4V7FsEW9S_rCvPgc\",\n      authDomain: \"chat-8a723.firebaseapp.com\",\n      databaseURL: \"https://chat-8a723.firebaseio.com\",\n      projectId: \"chat-8a723\",\n      storageBucket: \"chat-8a723.appspot.com\",\n      messagingSenderId: \"868038804017\",\n      appId: \"1:868038804017:web:e0f3f645ba1e06a2948b10\",\n      measurementId: \"G-RFY323LJ3K\"\n    }),\n    AngularFireAuthModule,\n    CommonModule,\n    FormsModule\n  ],\n  exports: [AuthenticationComponent]\n})\nexport class AuthenticationModule { }\n"],"names":["auth","Injectable","AngularFireAuth","firebase.auth","Component","NgModule","AngularFireModule","AngularFireAuthModule","CommonModule","FormsModule"],"mappings":"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"}